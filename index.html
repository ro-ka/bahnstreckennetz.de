<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Bahnstreckennetz</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.18.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

  <div id='map'></div>

  <script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoicm9rYSIsImEiOiJvR29QUEp3In0.xeb909L0DGJcmmprwfIwKA';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/roka/ciomo4s7f0011dkm0lzhvi74w',
        center: [10.45, 51.21],
        zoom: 6
    });
    map.dragRotate.disable();
    map.touchZoomRotate.disableRotation();


    map.on('load', function () {
      map.addSource("user", {
        "type": "geojson",
        "data": {
            "type": "FeatureCollection",
            "features": []
        }
      });

      map.addLayer({
        "id": "user",
        "type": "circle",
        "source": "user",
        "paint": {
          "circle-radius": 7,
          "circle-color": "#007cbf"
        }
      });
    });

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        var userPosition = [position.coords.longitude, position.coords.latitude];

        map.flyTo({center: userPosition, zoom: 10});
        map.getSource("user").setData({
          "type": "Feature",
          "geometry": {
            "type": "Point",
            "coordinates": userPosition
          }
        });
      }, function() {
        console.log('No Geolocation');
      });
    }
  </script>

</body>
</html>

