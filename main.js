!function e(t,n,o){function i(r,s){if(!n[r]){if(!t[r]){var u="function"==typeof require&&require;if(!s&&u)return u(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){var n=t[r][1][e];return i(n?n:e)},l,l.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=e("../config/map"),s=o(r),u=e("./popup"),c=o(u),l=function(){function e(t){var n=this,o=t.onLoad,a=void 0===o?function(){}:o;i(this,e),this.canvas=new mapboxgl.Map({container:"map",style:s["default"].style,center:s["default"].center,zoom:s["default"].zoom,minZoom:s["default"].minZoom}),this.canvas.dragRotate.disable(),this.canvas.touchZoomRotate.disableRotation(),this.canvas.on("load",function(){return a(n.canvas)}),this.canvas.on("click",this.onClick.bind(this)),this.canvas.on("mousemove",this.onMousemove.bind(this))}return a(e,[{key:"onClick",value:function(e){var t=this.canvas.queryRenderedFeatures(e.point,{layers:["railwaystationnodes"]}),n=t.length&&t[0];n&&(this.popup=new c["default"]({mapCanvas:this.canvas,feature:n}))}},{key:"onMousemove",value:function(e){var t=this.canvas.queryRenderedFeatures(e.point,{layers:["railwaystationnodes"]});this.canvas.getCanvas().style.cursor=t.length?"pointer":""}}]),e}();n["default"]=l},{"../config/map":5,"./popup":2}],2:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function a(e){var t=e.mapCanvas,n=e.feature;o(this,a);var i="https://reiseauskunft.bahn.de/bin/query.exe/dn?country=DEU&S=",r=n.properties.geographicalName;this.mapCanvas=t,this.popup=new mapboxgl.Popup,this.popup.setLngLat(n.geometry.coordinates).setHTML("<b>"+r+"</b></br>\n        <a href='"+i+encodeURIComponent(r)+"'\n          title='Verbindungen fÃ¼r "+r+" suchen'\n          target='_blank'>\n            &raquo; Verbindungen suchen\n        </a>").addTo(this.mapCanvas)};n["default"]=i},{}],3:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function a(){var e=this;o(this,a),this.container=document.querySelector(".site-header"),this.toggle=this.container.querySelector(".site-header__toggle"),this.toggle&&this.toggle.addEventListener("click",function(){e.container.classList.toggle("site-header--show-content")})};n["default"]=i},{}],4:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(){o(this,e),navigator.geolocation&&(this.$button=document.querySelector(".user-position"),this.$button.classList.add("user-position--show"),this.$button.addEventListener("click",this.getPosition.bind(this)))}return i(e,[{key:"initialize",value:function(e){this.mapCanvas=e,this.mapCanvas.addSource("user",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.mapCanvas.addLayer({id:"user",type:"circle",source:"user",paint:{"circle-radius":7,"circle-color":"#F45252"}})}},{key:"getPosition",value:function(){this.$button.classList.add("user-position--searching"),navigator.geolocation.getCurrentPosition(this.onPosition.bind(this),this.onError.bind(this))}},{key:"onPosition",value:function(e){var t=[e.coords.longitude,e.coords.latitude];this.$button.classList.remove("user-position--searching"),this.mapCanvas.flyTo({center:t,zoom:10}),this.mapCanvas.getSource("user").setData({type:"Feature",geometry:{type:"Point",coordinates:t}})}},{key:"onError",value:function(){this.$button.classList.remove("user-position--searching")}}]),e}();n["default"]=a},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={style:"mapbox://styles/roka/ciomo4s7f0011dkm0lzhvi74w",center:[10.45,51.21],zoom:5,minZoom:5},mapboxgl.accessToken="pk.eyJ1Ijoicm9rYSIsImEiOiJjazJsZnhsMXAwNjhiM2hsbmJ2NDRubmczIn0.UbkbXZc1GE26bsi6DJ8voQ"},{}],6:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=e("./components/map"),r=o(a),s=e("./components/site-header"),u=o(s),c=e("./components/user-position"),l=o(c),f=function p(){var e=this;i(this,p),this.map=new r["default"]({onLoad:function(t){e.userPosition.initialize(t)}}),this.siteHeader=new u["default"],this.userPosition=new l["default"]};window.app=new f},{"./components/map":1,"./components/site-header":3,"./components/user-position":4}]},{},[6]);
